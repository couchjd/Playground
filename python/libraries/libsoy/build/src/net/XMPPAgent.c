/* XMPPAgent.c generated by valac 0.22.1, the Vala compiler
 * generated from XMPPAgent.gs, do not modify */

/*
 *  libsoy - soy.net.XMPPAgent
 *  Copyright (C) 2006-2014 Copyleft Games Group
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU Affero General Public License as published
 *  by the Free Software Foundation, either version 3 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU Affero General Public License for more details.
 *
 *  You should have received a copy of the GNU Affero General Public License
 *  along with this program; if not, see http://www.gnu.org/licenses
 *
 *  soy.net.XMPPAgent - an ICE Agent that uses XMPP to share and negotiate candidates.
 */

#include <glib.h>
#include <glib-object.h>
#include <agent.h>
#include <nice/agent.h>
#include <gee.h>
#include <stdlib.h>
#include <string.h>
#include <loudmouth/loudmouth.h>


#define SOY_NET_TYPE_XMPP_AGENT (soy_net_xmpp_agent_get_type ())
#define SOY_NET_XMPP_AGENT(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_NET_TYPE_XMPP_AGENT, soynetXMPPAgent))
#define SOY_NET_XMPP_AGENT_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_NET_TYPE_XMPP_AGENT, soynetXMPPAgentClass))
#define SOY_NET_IS_XMPP_AGENT(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_NET_TYPE_XMPP_AGENT))
#define SOY_NET_IS_XMPP_AGENT_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_NET_TYPE_XMPP_AGENT))
#define SOY_NET_XMPP_AGENT_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_NET_TYPE_XMPP_AGENT, soynetXMPPAgentClass))

typedef struct _soynetXMPPAgent soynetXMPPAgent;
typedef struct _soynetXMPPAgentClass soynetXMPPAgentClass;
typedef struct _soynetXMPPAgentPrivate soynetXMPPAgentPrivate;
#define _g_object_unref0(var) ((var == NULL) ? NULL : (var = (g_object_unref (var), NULL)))
#define _g_slist_free0(var) ((var == NULL) ? NULL : (var = (g_slist_free (var), NULL)))

#define SOY_NET_TYPE__NETWORKTHREAD (soy_net__networkthread_get_type ())
#define SOY_NET__NETWORKTHREAD(obj) (G_TYPE_CHECK_INSTANCE_CAST ((obj), SOY_NET_TYPE__NETWORKTHREAD, soynet_NetworkThread))
#define SOY_NET__NETWORKTHREAD_CLASS(klass) (G_TYPE_CHECK_CLASS_CAST ((klass), SOY_NET_TYPE__NETWORKTHREAD, soynet_NetworkThreadClass))
#define SOY_NET_IS__NETWORKTHREAD(obj) (G_TYPE_CHECK_INSTANCE_TYPE ((obj), SOY_NET_TYPE__NETWORKTHREAD))
#define SOY_NET_IS__NETWORKTHREAD_CLASS(klass) (G_TYPE_CHECK_CLASS_TYPE ((klass), SOY_NET_TYPE__NETWORKTHREAD))
#define SOY_NET__NETWORKTHREAD_GET_CLASS(obj) (G_TYPE_INSTANCE_GET_CLASS ((obj), SOY_NET_TYPE__NETWORKTHREAD, soynet_NetworkThreadClass))

typedef struct _soynet_NetworkThread soynet_NetworkThread;
typedef struct _soynet_NetworkThreadClass soynet_NetworkThreadClass;
typedef struct _soynet_NetworkThreadPrivate soynet_NetworkThreadPrivate;
#define _g_free0(var) (var = (g_free (var), NULL))
#define _lm_message_node_unref0(var) ((var == NULL) ? NULL : (var = (lm_message_node_unref (var), NULL)))
#define _nice_candidate_free0(var) ((var == NULL) ? NULL : (var = (nice_candidate_free (var), NULL)))

struct _soynetXMPPAgent {
	GObject parent_instance;
	soynetXMPPAgentPrivate * priv;
	NiceAgent* agent;
	GSList* lcands;
	GSList* rcands;
};

struct _soynetXMPPAgentClass {
	GObjectClass parent_class;
};

struct _soynet_NetworkThread {
	GObject parent_instance;
	soynet_NetworkThreadPrivate * priv;
	GMainContext* context;
};

struct _soynet_NetworkThreadClass {
	GObjectClass parent_class;
};


static gpointer soy_net_xmpp_agent_parent_class = NULL;
extern GeeHashMap* soy_net_xmpp_agent_candidate_type_strs;
GeeHashMap* soy_net_xmpp_agent_candidate_type_strs = NULL;
extern GeeHashMap* soy_net_xmpp_agent_candidate_type_dict;
GeeHashMap* soy_net_xmpp_agent_candidate_type_dict = NULL;
extern soynet_NetworkThread* soy_net__thread;

GType soy_net_xmpp_agent_get_type (void) G_GNUC_CONST;
enum  {
	SOY_NET_XMPP_AGENT_DUMMY_PROPERTY
};
soynetXMPPAgent* soy_net_xmpp_agent_new (void);
soynetXMPPAgent* soy_net_xmpp_agent_construct (GType object_type);
GType soy_net__networkthread_get_type (void) G_GNUC_CONST;
void soy_net_xmpp_agent_component_state_changed (soynetXMPPAgent* self, guint p0, guint p1, NiceComponentState p2);
static void _soy_net_xmpp_agent_component_state_changed_nice_agent_component_state_changed (NiceAgent* _sender, guint p0, guint p1, NiceComponentState p2, gpointer self);
void soy_net_xmpp_agent_initial_binding_request_received (soynetXMPPAgent* self, guint p0);
static void _soy_net_xmpp_agent_initial_binding_request_received_nice_agent_initial_binding_request_received (NiceAgent* _sender, guint p0, gpointer self);
void soy_net_xmpp_agent_new_candidate (soynetXMPPAgent* self, guint p0, guint p1, const gchar* p2);
static void _soy_net_xmpp_agent_new_candidate_nice_agent_new_candidate (NiceAgent* _sender, guint p0, guint p1, const gchar* p2, gpointer self);
void soy_net_xmpp_agent_new_remote_candidate (soynetXMPPAgent* self, guint p0, guint p1, const gchar* p2);
static void _soy_net_xmpp_agent_new_remote_candidate_nice_agent_new_remote_candidate (NiceAgent* _sender, guint p0, guint p1, const gchar* p2, gpointer self);
void soy_net_xmpp_agent_new_selected_pair (soynetXMPPAgent* self, guint p0, guint p1, const gchar* p2, const gchar* p3);
static void _soy_net_xmpp_agent_new_selected_pair_nice_agent_new_selected_pair (NiceAgent* _sender, guint p0, guint p1, const gchar* p2, const gchar* p3, gpointer self);
void soy_net_xmpp_agent_reliable_transport_writable (soynetXMPPAgent* self, guint p0, guint p1);
static void _soy_net_xmpp_agent_reliable_transport_writable_nice_agent_reliable_transport_writable (NiceAgent* _sender, guint p0, guint p1, gpointer self);
const gchar* nice_component_state_to_string (NiceComponentState self);
static const char* _nice_component_state_to_string (NiceComponentState value);
void soy_net_xmpp_agent_add_local_candidates (soynetXMPPAgent* self, LmMessageNode* transport, GSList* lcands);
GSList* soy_net_xmpp_agent_get_remote_candidates (soynetXMPPAgent* self, LmMessageNode* transport, guint stream_id);
static GObject * soy_net_xmpp_agent_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties);
soynet_NetworkThread* soy_net__networkthread_new (void);
soynet_NetworkThread* soy_net__networkthread_construct (GType object_type);
static void soy_net_xmpp_agent_finalize (GObject* obj);


static void _soy_net_xmpp_agent_component_state_changed_nice_agent_component_state_changed (NiceAgent* _sender, guint p0, guint p1, NiceComponentState p2, gpointer self) {
#line 70 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	soy_net_xmpp_agent_component_state_changed (self, p0, p1, p2);
#line 124 "XMPPAgent.c"
}


static void _soy_net_xmpp_agent_initial_binding_request_received_nice_agent_initial_binding_request_received (NiceAgent* _sender, guint p0, gpointer self) {
#line 71 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	soy_net_xmpp_agent_initial_binding_request_received (self, p0);
#line 131 "XMPPAgent.c"
}


static void _soy_net_xmpp_agent_new_candidate_nice_agent_new_candidate (NiceAgent* _sender, guint p0, guint p1, const gchar* p2, gpointer self) {
#line 72 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	soy_net_xmpp_agent_new_candidate (self, p0, p1, p2);
#line 138 "XMPPAgent.c"
}


static void _soy_net_xmpp_agent_new_remote_candidate_nice_agent_new_remote_candidate (NiceAgent* _sender, guint p0, guint p1, const gchar* p2, gpointer self) {
#line 73 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	soy_net_xmpp_agent_new_remote_candidate (self, p0, p1, p2);
#line 145 "XMPPAgent.c"
}


static void _soy_net_xmpp_agent_new_selected_pair_nice_agent_new_selected_pair (NiceAgent* _sender, guint p0, guint p1, const gchar* p2, const gchar* p3, gpointer self) {
#line 74 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	soy_net_xmpp_agent_new_selected_pair (self, p0, p1, p2, p3);
#line 152 "XMPPAgent.c"
}


static void _soy_net_xmpp_agent_reliable_transport_writable_nice_agent_reliable_transport_writable (NiceAgent* _sender, guint p0, guint p1, gpointer self) {
#line 75 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	soy_net_xmpp_agent_reliable_transport_writable (self, p0, p1);
#line 159 "XMPPAgent.c"
}


soynetXMPPAgent* soy_net_xmpp_agent_construct (GType object_type) {
	soynetXMPPAgent * self = NULL;
	soynet_NetworkThread* _tmp0_ = NULL;
	GMainContext* _tmp1_ = NULL;
	NiceAgent* _tmp2_ = NULL;
	NiceAgent* _tmp3_ = NULL;
	NiceAgent* _tmp4_ = NULL;
	NiceAgent* _tmp5_ = NULL;
	NiceAgent* _tmp6_ = NULL;
	NiceAgent* _tmp7_ = NULL;
	NiceAgent* _tmp8_ = NULL;
	NiceAgent* _tmp9_ = NULL;
	NiceAgent* _tmp10_ = NULL;
#line 64 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	self = (soynetXMPPAgent*) g_object_new (object_type, NULL);
#line 65 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp0_ = soy_net__thread;
#line 65 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp1_ = _tmp0_->context;
#line 65 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp2_ = nice_agent_new (_tmp1_, (gint) NICE_COMPATIBILITY_RFC5245);
#line 65 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_g_object_unref0 (self->agent);
#line 65 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	self->agent = _tmp2_;
#line 66 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp3_ = self->agent;
#line 66 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_object_set (_tmp3_, "stun-server", "132.177.123.13", NULL);
#line 67 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp4_ = self->agent;
#line 67 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_object_set (_tmp4_, "stun-server-port", (guint) 3478, NULL);
#line 70 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp5_ = self->agent;
#line 70 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_signal_connect_object (_tmp5_, "component-state-changed", (GCallback) _soy_net_xmpp_agent_component_state_changed_nice_agent_component_state_changed, self, 0);
#line 71 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp6_ = self->agent;
#line 71 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_signal_connect_object (_tmp6_, "initial-binding-request-received", (GCallback) _soy_net_xmpp_agent_initial_binding_request_received_nice_agent_initial_binding_request_received, self, 0);
#line 72 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp7_ = self->agent;
#line 72 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_signal_connect_object (_tmp7_, "new-candidate", (GCallback) _soy_net_xmpp_agent_new_candidate_nice_agent_new_candidate, self, 0);
#line 73 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp8_ = self->agent;
#line 73 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_signal_connect_object (_tmp8_, "new-remote-candidate", (GCallback) _soy_net_xmpp_agent_new_remote_candidate_nice_agent_new_remote_candidate, self, 0);
#line 74 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp9_ = self->agent;
#line 74 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_signal_connect_object (_tmp9_, "new-selected-pair", (GCallback) _soy_net_xmpp_agent_new_selected_pair_nice_agent_new_selected_pair, self, 0);
#line 75 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp10_ = self->agent;
#line 75 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_signal_connect_object (_tmp10_, "reliable-transport-writable", (GCallback) _soy_net_xmpp_agent_reliable_transport_writable_nice_agent_reliable_transport_writable, self, 0);
#line 64 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	return self;
#line 222 "XMPPAgent.c"
}


soynetXMPPAgent* soy_net_xmpp_agent_new (void) {
#line 64 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	return soy_net_xmpp_agent_construct (SOY_NET_TYPE_XMPP_AGENT);
#line 229 "XMPPAgent.c"
}


static const char* _nice_component_state_to_string (NiceComponentState value) {
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	switch (value) {
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		case NICE_COMPONENT_STATE_DISCONNECTED:
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		return "NICE_COMPONENT_STATE_DISCONNECTED";
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		case NICE_COMPONENT_STATE_GATHERING:
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		return "NICE_COMPONENT_STATE_GATHERING";
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		case NICE_COMPONENT_STATE_CONNECTING:
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		return "NICE_COMPONENT_STATE_CONNECTING";
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		case NICE_COMPONENT_STATE_CONNECTED:
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		return "NICE_COMPONENT_STATE_CONNECTED";
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		case NICE_COMPONENT_STATE_READY:
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		return "NICE_COMPONENT_STATE_READY";
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		case NICE_COMPONENT_STATE_FAILED:
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		return "NICE_COMPONENT_STATE_FAILED";
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		case NICE_COMPONENT_STATE_LAST:
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		return "NICE_COMPONENT_STATE_LAST";
#line 264 "XMPPAgent.c"
	}
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	return NULL;
#line 268 "XMPPAgent.c"
}


void soy_net_xmpp_agent_component_state_changed (soynetXMPPAgent* self, guint p0, guint p1, NiceComponentState p2) {
	NiceComponentState _tmp0_ = 0;
	const gchar* _tmp1_ = NULL;
#line 78 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (self != NULL);
#line 79 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_print ("component_state_changed\n");
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp0_ = p2;
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp1_ = _nice_component_state_to_string (_tmp0_);
#line 80 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_print (" state %s\n", _tmp1_);
#line 285 "XMPPAgent.c"
}


void soy_net_xmpp_agent_initial_binding_request_received (soynetXMPPAgent* self, guint p0) {
#line 82 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (self != NULL);
#line 83 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_print ("initial_binding_request_received\n");
#line 294 "XMPPAgent.c"
}


void soy_net_xmpp_agent_new_candidate (soynetXMPPAgent* self, guint p0, guint p1, const gchar* p2) {
#line 85 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (self != NULL);
#line 85 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (p2 != NULL);
#line 86 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_print ("new_candidate\n");
#line 305 "XMPPAgent.c"
}


void soy_net_xmpp_agent_new_remote_candidate (soynetXMPPAgent* self, guint p0, guint p1, const gchar* p2) {
#line 88 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (self != NULL);
#line 88 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (p2 != NULL);
#line 89 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_print ("new_remote_candidate\n");
#line 316 "XMPPAgent.c"
}


void soy_net_xmpp_agent_new_selected_pair (soynetXMPPAgent* self, guint p0, guint p1, const gchar* p2, const gchar* p3) {
#line 91 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (self != NULL);
#line 91 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (p2 != NULL);
#line 91 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (p3 != NULL);
#line 92 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_print ("new_selected_pair\n");
#line 329 "XMPPAgent.c"
}


void soy_net_xmpp_agent_reliable_transport_writable (soynetXMPPAgent* self, guint p0, guint p1) {
#line 94 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (self != NULL);
#line 95 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_print ("reliable_transport_writable\n");
#line 338 "XMPPAgent.c"
}


static gpointer _lm_message_node_ref0 (gpointer self) {
#line 103 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	return self ? lm_message_node_ref (self) : NULL;
#line 345 "XMPPAgent.c"
}


void soy_net_xmpp_agent_add_local_candidates (soynetXMPPAgent* self, LmMessageNode* transport, GSList* lcands) {
	GSList* _tmp0_ = NULL;
#line 98 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (self != NULL);
#line 98 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_if_fail (transport != NULL);
#line 99 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp0_ = lcands;
#line 357 "XMPPAgent.c"
	{
		GSList* nice_candidate_collection = NULL;
		GSList* nice_candidate_it = NULL;
#line 99 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		nice_candidate_collection = _tmp0_;
#line 99 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		for (nice_candidate_it = nice_candidate_collection; nice_candidate_it != NULL; nice_candidate_it = nice_candidate_it->next) {
#line 365 "XMPPAgent.c"
			NiceCandidate* nice_candidate = NULL;
#line 99 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
			nice_candidate = (NiceCandidate*) nice_candidate_it->data;
#line 369 "XMPPAgent.c"
			{
				gchar* addr = NULL;
				gchar* _tmp1_ = NULL;
				NiceCandidate* _tmp2_ = NULL;
				const gchar* _tmp3_ = NULL;
				LmMessageNode* candidate = NULL;
				LmMessageNode* _tmp4_ = NULL;
				LmMessageNode* _tmp5_ = NULL;
				LmMessageNode* _tmp6_ = NULL;
				LmMessageNode* _tmp7_ = NULL;
				NiceCandidate* _tmp8_ = NULL;
				guint _tmp9_ = 0U;
				gchar* _tmp10_ = NULL;
				gchar* _tmp11_ = NULL;
				LmMessageNode* _tmp12_ = NULL;
				NiceCandidate* _tmp13_ = NULL;
				gchar* _tmp14_ = NULL;
				gint _tmp14__length1 = 0;
				LmMessageNode* _tmp15_ = NULL;
				LmMessageNode* _tmp16_ = NULL;
				const gchar* _tmp17_ = NULL;
				LmMessageNode* _tmp18_ = NULL;
				LmMessageNode* _tmp19_ = NULL;
				NiceCandidate* _tmp20_ = NULL;
				guint _tmp21_ = 0U;
				gchar* _tmp22_ = NULL;
				gchar* _tmp23_ = NULL;
				LmMessageNode* _tmp24_ = NULL;
				NiceCandidate* _tmp25_ = NULL;
				guint32 _tmp26_ = 0U;
				gchar* _tmp27_ = NULL;
				gchar* _tmp28_ = NULL;
				LmMessageNode* _tmp29_ = NULL;
				LmMessageNode* _tmp30_ = NULL;
				GeeHashMap* _tmp31_ = NULL;
				NiceCandidate* _tmp32_ = NULL;
				NiceCandidateType _tmp33_ = 0;
				gpointer _tmp34_ = NULL;
				gchar* _tmp35_ = NULL;
#line 100 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp1_ = g_new0 (gchar, 100);
#line 100 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				addr = (gchar*) _tmp1_;
#line 101 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp2_ = nice_candidate;
#line 101 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp3_ = addr;
#line 101 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				nice_address_to_string (&_tmp2_->addr, _tmp3_);
#line 103 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp4_ = transport;
#line 103 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp5_ = lm_message_node_add_child (_tmp4_, "candidate", NULL);
#line 103 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp6_ = _lm_message_node_ref0 (_tmp5_);
#line 103 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				candidate = _tmp6_;
#line 104 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp7_ = candidate;
#line 104 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp8_ = nice_candidate;
#line 104 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp9_ = _tmp8_->stream_id;
#line 104 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp10_ = g_strdup_printf ("%u", _tmp9_);
#line 104 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp11_ = _tmp10_;
#line 104 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				lm_message_node_set_attribute (_tmp7_, "component", _tmp11_);
#line 104 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_g_free0 (_tmp11_);
#line 105 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp12_ = candidate;
#line 105 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp13_ = nice_candidate;
#line 105 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp14_ = _tmp13_->foundation;
#line 105 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp14__length1 = -1;
#line 105 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				lm_message_node_set_attribute (_tmp12_, "foundation", (const gchar*) _tmp14_);
#line 108 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp15_ = candidate;
#line 108 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				lm_message_node_set_attribute (_tmp15_, "id", "TBD");
#line 109 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp16_ = candidate;
#line 109 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp17_ = addr;
#line 109 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				lm_message_node_set_attribute (_tmp16_, "ip", _tmp17_);
#line 112 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp18_ = candidate;
#line 112 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				lm_message_node_set_attribute (_tmp18_, "network", "0");
#line 113 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp19_ = candidate;
#line 113 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp20_ = nice_candidate;
#line 113 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp21_ = nice_address_get_port (&_tmp20_->addr);
#line 113 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp22_ = g_strdup_printf ("%u", _tmp21_);
#line 113 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp23_ = _tmp22_;
#line 113 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				lm_message_node_set_attribute (_tmp19_, "port", _tmp23_);
#line 113 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_g_free0 (_tmp23_);
#line 114 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp24_ = candidate;
#line 114 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp25_ = nice_candidate;
#line 114 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp26_ = _tmp25_->priority;
#line 114 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp27_ = g_strdup_printf ("%u", _tmp26_);
#line 114 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp28_ = _tmp27_;
#line 114 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				lm_message_node_set_attribute (_tmp24_, "priority", _tmp28_);
#line 114 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_g_free0 (_tmp28_);
#line 115 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp29_ = candidate;
#line 115 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				lm_message_node_set_attribute (_tmp29_, "protocol", "udp");
#line 116 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp30_ = candidate;
#line 116 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp31_ = soy_net_xmpp_agent_candidate_type_strs;
#line 116 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp32_ = nice_candidate;
#line 116 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp33_ = _tmp32_->type;
#line 116 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp34_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp31_, (gpointer) ((gintptr) ((gint) _tmp33_)));
#line 116 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_tmp35_ = (gchar*) _tmp34_;
#line 116 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				lm_message_node_set_attribute (_tmp30_, "type", _tmp35_);
#line 116 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_g_free0 (_tmp35_);
#line 99 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_lm_message_node_unref0 (candidate);
#line 99 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
				_g_free0 (addr);
#line 517 "XMPPAgent.c"
			}
		}
	}
}


static gchar* bool_to_string (gboolean self) {
	gchar* result = NULL;
#line 37 "/usr/share/vala-0.22/vapi/glib-2.0.vapi"
	if (self) {
#line 528 "XMPPAgent.c"
		gchar* _tmp0_ = NULL;
#line 38 "/usr/share/vala-0.22/vapi/glib-2.0.vapi"
		_tmp0_ = g_strdup ("true");
#line 38 "/usr/share/vala-0.22/vapi/glib-2.0.vapi"
		result = _tmp0_;
#line 38 "/usr/share/vala-0.22/vapi/glib-2.0.vapi"
		return result;
#line 536 "XMPPAgent.c"
	} else {
		gchar* _tmp1_ = NULL;
#line 40 "/usr/share/vala-0.22/vapi/glib-2.0.vapi"
		_tmp1_ = g_strdup ("false");
#line 40 "/usr/share/vala-0.22/vapi/glib-2.0.vapi"
		result = _tmp1_;
#line 40 "/usr/share/vala-0.22/vapi/glib-2.0.vapi"
		return result;
#line 545 "XMPPAgent.c"
	}
}


GSList* soy_net_xmpp_agent_get_remote_candidates (soynetXMPPAgent* self, LmMessageNode* transport, guint stream_id) {
	GSList* result = NULL;
	GSList* rcands = NULL;
	LmMessageNode* candidate = NULL;
	LmMessageNode* _tmp0_ = NULL;
	LmMessageNode* _tmp1_ = NULL;
	LmMessageNode* _tmp2_ = NULL;
	LmMessageNode* _tmp3_ = NULL;
	GSList* _tmp45_ = NULL;
	GSList* _tmp46_ = NULL;
#line 119 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_val_if_fail (self != NULL, NULL);
#line 119 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	g_return_val_if_fail (transport != NULL, NULL);
#line 120 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	rcands = NULL;
#line 121 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp0_ = transport;
#line 121 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp1_ = lm_message_node_get_child (_tmp0_, "candidate");
#line 121 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp2_ = _lm_message_node_ref0 (_tmp1_);
#line 121 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	candidate = _tmp2_;
#line 124 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp3_ = candidate;
#line 124 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	if (_tmp3_ == NULL) {
#line 125 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		result = rcands;
#line 125 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_lm_message_node_unref0 (candidate);
#line 125 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		return result;
#line 584 "XMPPAgent.c"
	}
#line 127 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	while (TRUE) {
#line 588 "XMPPAgent.c"
		LmMessageNode* _tmp4_ = NULL;
		NiceCandidate* rcand = NULL;
		GeeHashMap* _tmp5_ = NULL;
		LmMessageNode* _tmp6_ = NULL;
		const gchar* _tmp7_ = NULL;
		gpointer _tmp8_ = NULL;
		NiceCandidate* _tmp9_ = NULL;
		LmMessageNode* _tmp10_ = NULL;
		const gchar* _tmp11_ = NULL;
		LmMessageNode* _tmp12_ = NULL;
		const gchar* _tmp13_ = NULL;
		LmMessageNode* _tmp14_ = NULL;
		const gchar* _tmp15_ = NULL;
		LmMessageNode* _tmp16_ = NULL;
		const gchar* _tmp17_ = NULL;
		NiceCandidate* _tmp18_ = NULL;
		LmMessageNode* _tmp19_ = NULL;
		const gchar* _tmp20_ = NULL;
		NiceCandidate* _tmp21_ = NULL;
		LmMessageNode* _tmp22_ = NULL;
		const gchar* _tmp23_ = NULL;
		gint _tmp24_ = 0;
		NiceCandidate* _tmp25_ = NULL;
		NiceCandidate* _tmp26_ = NULL;
		LmMessageNode* _tmp27_ = NULL;
		const gchar* _tmp28_ = NULL;
		gint _tmp29_ = 0;
		NiceCandidate* _tmp30_ = NULL;
		LmMessageNode* _tmp31_ = NULL;
		const gchar* _tmp32_ = NULL;
		gint _tmp33_ = 0;
		NiceCandidate* _tmp34_ = NULL;
		guint _tmp35_ = 0U;
		NiceCandidate* _tmp36_ = NULL;
		gboolean _tmp37_ = FALSE;
		gchar* _tmp38_ = NULL;
		gchar* _tmp39_ = NULL;
		NiceCandidate* _tmp40_ = NULL;
		NiceCandidate* _tmp41_ = NULL;
		LmMessageNode* _tmp42_ = NULL;
		LmMessageNode* _tmp43_ = NULL;
		LmMessageNode* _tmp44_ = NULL;
#line 127 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp4_ = candidate;
#line 127 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		if (!(_tmp4_ != NULL)) {
#line 127 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
			break;
#line 637 "XMPPAgent.c"
		}
#line 129 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp5_ = soy_net_xmpp_agent_candidate_type_dict;
#line 129 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp6_ = candidate;
#line 129 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp7_ = lm_message_node_get_attribute (_tmp6_, "type");
#line 129 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp8_ = gee_abstract_map_get ((GeeAbstractMap*) _tmp5_, _tmp7_);
#line 129 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp9_ = nice_candidate_new ((guint) ((gint) ((gintptr) _tmp8_)));
#line 129 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		rcand = _tmp9_;
#line 131 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		g_print ("Remote Candidate\n");
#line 132 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp10_ = candidate;
#line 132 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp11_ = lm_message_node_get_attribute (_tmp10_, "ip");
#line 132 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		g_print ("%s\n", _tmp11_);
#line 133 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp12_ = candidate;
#line 133 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp13_ = lm_message_node_get_attribute (_tmp12_, "port");
#line 133 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		g_print ("port: %s\n", _tmp13_);
#line 134 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp14_ = candidate;
#line 134 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp15_ = lm_message_node_get_attribute (_tmp14_, "priority");
#line 134 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		g_print ("priority:  %s\n", _tmp15_);
#line 135 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp16_ = candidate;
#line 135 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp17_ = lm_message_node_get_attribute (_tmp16_, "component");
#line 135 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		g_print ("component %s\n", _tmp17_);
#line 138 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp18_ = rcand;
#line 138 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp19_ = candidate;
#line 138 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp20_ = lm_message_node_get_attribute (_tmp19_, "ip");
#line 138 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		nice_address_set_from_string (&_tmp18_->addr, _tmp20_);
#line 139 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp21_ = rcand;
#line 139 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp22_ = candidate;
#line 139 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp23_ = lm_message_node_get_attribute (_tmp22_, "port");
#line 139 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp24_ = atoi (_tmp23_);
#line 139 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		nice_address_set_port (&_tmp21_->addr, (guint) _tmp24_);
#line 140 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp25_ = rcand;
#line 140 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp25_->transport = NICE_CANDIDATE_TRANSPORT_UDP;
#line 141 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp26_ = rcand;
#line 141 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp27_ = candidate;
#line 141 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp28_ = lm_message_node_get_attribute (_tmp27_, "priority");
#line 141 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp29_ = atoi (_tmp28_);
#line 141 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp26_->priority = (guint32) _tmp29_;
#line 142 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp30_ = rcand;
#line 142 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp31_ = candidate;
#line 142 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp32_ = lm_message_node_get_attribute (_tmp31_, "component");
#line 142 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp33_ = atoi (_tmp32_);
#line 142 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp30_->component_id = (guint) _tmp33_;
#line 143 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp34_ = rcand;
#line 143 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp35_ = stream_id;
#line 143 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp34_->stream_id = _tmp35_;
#line 145 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp36_ = rcand;
#line 145 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp37_ = nice_address_is_valid (&_tmp36_->addr);
#line 145 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp38_ = bool_to_string (_tmp37_);
#line 145 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp39_ = _tmp38_;
#line 145 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		g_print ("%s\n", _tmp39_);
#line 145 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_g_free0 (_tmp39_);
#line 146 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp40_ = rcand;
#line 146 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp41_ = nice_candidate_copy (_tmp40_);
#line 146 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		rcands = g_slist_append (rcands, _tmp41_);
#line 147 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp42_ = candidate;
#line 147 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp43_ = _tmp42_->next;
#line 147 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp44_ = _lm_message_node_ref0 (_tmp43_);
#line 147 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_lm_message_node_unref0 (candidate);
#line 147 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		candidate = _tmp44_;
#line 127 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_nice_candidate_free0 (rcand);
#line 755 "XMPPAgent.c"
	}
#line 148 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp45_ = rcands;
#line 148 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp46_ = g_slist_copy (_tmp45_);
#line 148 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	result = _tmp46_;
#line 148 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_lm_message_node_unref0 (candidate);
#line 148 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_g_slist_free0 (rcands);
#line 148 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	return result;
#line 769 "XMPPAgent.c"
}


static GObject * soy_net_xmpp_agent_constructor (GType type, guint n_construct_properties, GObjectConstructParam * construct_properties) {
	GObject * obj;
	GObjectClass * parent_class;
	soynetXMPPAgent * self;
	GeeHashMap* _tmp0_ = NULL;
	GeeHashMap* _tmp1_ = NULL;
	GeeHashMap* _tmp2_ = NULL;
	GeeHashMap* _tmp3_ = NULL;
	GeeHashMap* _tmp4_ = NULL;
	GeeHashMap* _tmp5_ = NULL;
	GeeHashMap* _tmp6_ = NULL;
	GeeHashMap* _tmp7_ = NULL;
	GeeHashMap* _tmp8_ = NULL;
	GeeHashMap* _tmp9_ = NULL;
#line 51 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	parent_class = G_OBJECT_CLASS (soy_net_xmpp_agent_parent_class);
#line 51 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	obj = parent_class->constructor (type, n_construct_properties, construct_properties);
#line 51 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_NET_TYPE_XMPP_AGENT, soynetXMPPAgent);
#line 52 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp0_ = gee_hash_map_new (G_TYPE_INT, NULL, NULL, G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
#line 52 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_g_object_unref0 (soy_net_xmpp_agent_candidate_type_strs);
#line 52 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	soy_net_xmpp_agent_candidate_type_strs = _tmp0_;
#line 53 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp1_ = soy_net_xmpp_agent_candidate_type_strs;
#line 53 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	gee_abstract_map_set ((GeeAbstractMap*) _tmp1_, (gpointer) ((gintptr) ((gint) NICE_CANDIDATE_TYPE_HOST)), "host");
#line 54 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp2_ = soy_net_xmpp_agent_candidate_type_strs;
#line 54 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	gee_abstract_map_set ((GeeAbstractMap*) _tmp2_, (gpointer) ((gintptr) ((gint) NICE_CANDIDATE_TYPE_SERVER_REFLEXIVE)), "srflx");
#line 55 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp3_ = soy_net_xmpp_agent_candidate_type_strs;
#line 55 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	gee_abstract_map_set ((GeeAbstractMap*) _tmp3_, (gpointer) ((gintptr) ((gint) NICE_CANDIDATE_TYPE_PEER_REFLEXIVE)), "prflx");
#line 56 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp4_ = soy_net_xmpp_agent_candidate_type_strs;
#line 56 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	gee_abstract_map_set ((GeeAbstractMap*) _tmp4_, (gpointer) ((gintptr) ((gint) NICE_CANDIDATE_TYPE_RELAYED)), "relay");
#line 58 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp5_ = gee_hash_map_new (G_TYPE_STRING, (GBoxedCopyFunc) g_strdup, g_free, G_TYPE_INT, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL);
#line 58 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_g_object_unref0 (soy_net_xmpp_agent_candidate_type_dict);
#line 58 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	soy_net_xmpp_agent_candidate_type_dict = _tmp5_;
#line 59 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp6_ = soy_net_xmpp_agent_candidate_type_dict;
#line 59 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	gee_abstract_map_set ((GeeAbstractMap*) _tmp6_, "host", (gpointer) ((gintptr) ((gint) NICE_CANDIDATE_TYPE_HOST)));
#line 60 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp7_ = soy_net_xmpp_agent_candidate_type_dict;
#line 60 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	gee_abstract_map_set ((GeeAbstractMap*) _tmp7_, "srflx", (gpointer) ((gintptr) ((gint) NICE_CANDIDATE_TYPE_SERVER_REFLEXIVE)));
#line 61 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp8_ = soy_net_xmpp_agent_candidate_type_dict;
#line 61 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	gee_abstract_map_set ((GeeAbstractMap*) _tmp8_, "prflx", (gpointer) ((gintptr) ((gint) NICE_CANDIDATE_TYPE_PEER_REFLEXIVE)));
#line 62 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp9_ = soy_net_xmpp_agent_candidate_type_dict;
#line 62 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	gee_abstract_map_set ((GeeAbstractMap*) _tmp9_, "relay", (gpointer) ((gintptr) ((gint) NICE_CANDIDATE_TYPE_RELAYED)));
#line 51 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	return obj;
#line 839 "XMPPAgent.c"
}


static void soy_net_xmpp_agent_class_init (soynetXMPPAgentClass * klass) {
	soynet_NetworkThread* _tmp0_ = NULL;
#line 36 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	soy_net_xmpp_agent_parent_class = g_type_class_peek_parent (klass);
#line 36 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	G_OBJECT_CLASS (klass)->constructor = soy_net_xmpp_agent_constructor;
#line 36 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	G_OBJECT_CLASS (klass)->finalize = soy_net_xmpp_agent_finalize;
#line 48 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_tmp0_ = soy_net__thread;
#line 48 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	if (_tmp0_ == NULL) {
#line 855 "XMPPAgent.c"
		soynet_NetworkThread* _tmp1_ = NULL;
#line 49 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_tmp1_ = soy_net__networkthread_new ();
#line 49 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		_g_object_unref0 (soy_net__thread);
#line 49 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
		soy_net__thread = _tmp1_;
#line 863 "XMPPAgent.c"
	}
}


static void soy_net_xmpp_agent_instance_init (soynetXMPPAgent * self) {
}


static void soy_net_xmpp_agent_finalize (GObject* obj) {
	soynetXMPPAgent * self;
#line 36 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	self = G_TYPE_CHECK_INSTANCE_CAST (obj, SOY_NET_TYPE_XMPP_AGENT, soynetXMPPAgent);
#line 38 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_g_object_unref0 (self->agent);
#line 39 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_g_slist_free0 (self->lcands);
#line 40 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	_g_slist_free0 (self->rcands);
#line 36 "/home/jeff/Documents/libraries/libsoy/src/net/XMPPAgent.gs"
	G_OBJECT_CLASS (soy_net_xmpp_agent_parent_class)->finalize (obj);
#line 884 "XMPPAgent.c"
}


GType soy_net_xmpp_agent_get_type (void) {
	static volatile gsize soy_net_xmpp_agent_type_id__volatile = 0;
	if (g_once_init_enter (&soy_net_xmpp_agent_type_id__volatile)) {
		static const GTypeInfo g_define_type_info = { sizeof (soynetXMPPAgentClass), (GBaseInitFunc) NULL, (GBaseFinalizeFunc) NULL, (GClassInitFunc) soy_net_xmpp_agent_class_init, (GClassFinalizeFunc) NULL, NULL, sizeof (soynetXMPPAgent), 0, (GInstanceInitFunc) soy_net_xmpp_agent_instance_init, NULL };
		GType soy_net_xmpp_agent_type_id;
		soy_net_xmpp_agent_type_id = g_type_register_static (G_TYPE_OBJECT, "soynetXMPPAgent", &g_define_type_info, 0);
		g_once_init_leave (&soy_net_xmpp_agent_type_id__volatile, soy_net_xmpp_agent_type_id);
	}
	return soy_net_xmpp_agent_type_id__volatile;
}



